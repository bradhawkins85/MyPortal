<!DOCTYPE html>
<html>
  <%- include('partials/head', { title: 'Staff' }) %>
<body>
  <div class="app-container">
    <%- include('partials/sidebar') %>
    <div class="content">
      <h1>Staff</h1>
      <% if (isSuperAdmin) { %>
      <section>
        <h2>Add Staff</h2>
        <form action="/staff" method="post">
          <input type="text" name="firstName" placeholder="First Name" required>
          <input type="text" name="lastName" placeholder="Last Name" required>
          <input type="email" name="email" placeholder="Email" required>
          <input type="date" name="dateOnboarded">
          <label><input type="checkbox" name="enabled" value="1" checked> Enabled</label>
          <button type="submit">Add</button>
        </form>
      </section>
      <% } %>
      <section>
        <h2>Current Staff</h2>
        <table>
          <thead>
            <tr><th>First Name</th><th>Last Name</th><th>Email</th><th>Date Onboarded</th><th>Enabled</th></tr>
          </thead>
          <tbody>
          <% staff.forEach(function(s) { %>
            <tr>
              <td><%= s.first_name %></td>
              <td><%= s.last_name %></td>
              <td><%= s.email %></td>
              <td><%= s.date_onboarded %></td>
              <td>
                <form action="/staff/enabled" method="post">
                  <input type="hidden" name="staffId" value="<%= s.id %>">
                  <input type="checkbox" name="enabled" value="1" <%= s.enabled ? 'checked' : '' %> onchange="this.form.submit()">
                </form>
              </td>
            </tr>
          <% }); %>
          </tbody>
        </table>
      </section>
    </div>
  </div>
</body>
</html>
