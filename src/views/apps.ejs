<!DOCTYPE html>
<html>
  <%- include('partials/head', { title: 'Apps' }) %>
  <body>
    <div class="app-container">
      <%- include('partials/sidebar') %>
      <div class="content">
        <h1>Apps</h1>
        <form action="/apps" method="post">
          <input type="text" name="sku" placeholder="SKU" required>
          <input type="text" name="name" placeholder="Name" required>
          <input type="number" step="0.01" name="price" placeholder="Default Price" required>
          <input type="text" name="contractTerm" placeholder="Contract Term" required>
          <button type="submit">Add App</button>
        </form>
        <table>
          <tr><th>SKU</th><th>Name</th><th>Default Price</th><th>Contract Term</th></tr>
          <% apps.forEach(function(a){ %>
            <tr>
              <td><%= a.sku %></td>
              <td><%= a.name %></td>
              <td><%= a.default_price %></td>
              <td><%= a.contract_term %></td>
            </tr>
          <% }); %>
        </table>
        <h2>Company Pricing</h2>
        <form action="/apps/price" method="post">
          <select name="appId">
            <% apps.forEach(function(a){ %>
              <option value="<%= a.id %>"><%= a.name %></option>
            <% }); %>
          </select>
          <select name="companyId">
            <% allCompanies.forEach(function(c){ %>
              <option value="<%= c.id %>"><%= c.name %></option>
            <% }); %>
          </select>
          <input type="number" step="0.01" name="price" placeholder="Price" required>
          <button type="submit">Set Price</button>
        </form>
        <h3>Existing Company Prices</h3>
        <table>
          <tr><th>Company</th><th>App</th><th>Price</th></tr>
          <% companyPrices.forEach(function(p){ %>
            <tr>
              <td><%= p.company_name %></td>
              <td><%= p.app_name %></td>
              <td><%= p.price %></td>
            </tr>
          <% }); %>
        </table>
      </div>
    </div>
  </body>
</html>
