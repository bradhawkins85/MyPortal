<!DOCTYPE html>
<html>
  <%- include('partials/head', { title: 'Cart' }) %>
<body>
  <div class="app-container">
    <%- include('partials/sidebar') %>
    <div class="content">
      <h1>Cart</h1>
      <% if (orderMessage) { %>
        <p><%= orderMessage %></p>
      <% } %>
      <% if (cart.length === 0) { %>
        <p>Your cart is empty.</p>
      <% } else { %>
        <form action="/cart/remove" method="post">
          <table>
            <thead>
              <tr>
                <th>Select</th>
                <th>Image</th>
                <th>Name</th>
                <th>SKU</th>
                <th>Description</th>
                <th>Price</th>
                <th>Quantity</th>
              </tr>
            </thead>
            <tbody>
              <% cart.forEach(function(item){ %>
                <tr>
                  <td><input type="checkbox" name="remove" value="<%= item.productId %>"></td>
                  <td><% if (item.imageUrl) { %><img src="<%= item.imageUrl %>" width="50" alt=""><% } %></td>
                  <td><%= item.name %></td>
                  <td><%= item.sku %></td>
                  <td><%- item.description.replace(/\n/g, '<br>') %></td>
                  <td>$<%= item.price.toFixed(2) %></td>
                  <td><%= item.quantity %></td>
                </tr>
              <% }) %>
            </tbody>
          </table>
          <button type="submit">Remove Selected</button>
        </form>
        <form action="/cart/place-order" method="post">
          <p>Total: $<%= total.toFixed(2) %></p>
          <label>PO Number: <input type="text" name="poNumber" /></label>
          <button type="submit">Place Order</button>
        </form>
      <% } %>
    </div>
  </div>
</body>
</html>
