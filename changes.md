- 2025-10-11, 11:45 UTC, Fix, Synced stock feed images into the portal and replaced zero pricing with RRP during product updates
- 2025-10-08, 13:09 UTC, Feature, Added admin UI for inline API key rotation with cross-service audit correlation dashboards and secure copy workflows
- 2025-10-08, 13:06 UTC, Fix, Added stock feed product update handler so scheduled Update Products runs refresh inventory data
- 2025-10-08, 13:09 UTC, Fix, Ensured the shop category sidebar remains top-aligned when product listings extend the page
- 2025-10-08, 13:01 UTC, Feature, Redesigned shop catalogue layout with sidebar category navigation and removed vendor SKUs from the customer view
- 2025-10-08, 12:51 UTC, Fix, Restored shop product creation with validated uploads and database persistence to resolve Not Found errors
- 2025-10-08, 12:41 UTC, Fix, Updated API documentation links to open in a new tab with secure attributes for consistent navigation
- 2025-10-11, 09:30 UTC, Fix, Added server-rendered CSRF tokens across portal forms so submissions succeed even without client-side scripts
- 2025-10-08, 12:36 UTC, Fix, Allowed the CSRF middleware to validate multipart form tokens so shop product uploads succeed
- 2025-10-08, 12:22 UTC, Fix, Removed the product description textarea from the shop admin add product form and refreshed helper copy
- 2025-10-11, 10:30 UTC, Fix, Restored legacy shop product image loading by securing nested upload path handling
- 2025-10-08, 12:34 UTC, Fix, Added multipart fallback parsing for mislabelled switch-company submissions so company switching succeeds for FormData clients
- 2025-10-08, 12:44 UTC, Fix, Ensured company switch submissions always post the selected companyId by injecting a hidden field before form submission
- 2025-10-08, 12:20 UTC, Fix, Embedded CSRF tokens into Shop admin templates and base helpers to restore product management submissions
- 2025-10-08, 12:17 UTC, Change, Updated the customer forms portal route to /myforms with navigation updates and a legacy redirect
- 2025-10-08, 12:12 UTC, Fix, Removed product description input from the shop admin creation form per request
- 2025-10-08, 12:10 UTC, Fix, Stored imported shop images in the secure uploads directory and enforced validation to resolve 404s
- 2025-10-10, 16:05 UTC, Fix, Namespaced the forms API under /api/forms so the customer UI renders instead of JSON responses
- 2025-10-08, 12:08 UTC, Fix, Sanitised automation scheduler task payloads before JSON encoding to restore the admin dashboard
- 2025-10-10, 14:20 UTC, Fix, Replaced MariaDB-incompatible UTC timestamp defaults in scheduler migration to restore service startup
- 2025-10-08, 11:49 UTC, Fix, Restored the licenses admin HTML view by namespacing the API under /api to prevent JSON responses from hijacking the UI route
- 2025-10-10, 04:45 UTC, Fix, Routed staff API under /api to restore the staff management UI rendering on the Python portal
- 2025-10-10, 13:45 UTC, Fix, Corrected scheduler monitoring migration defaults to remain MariaDB-compatible while storing UTC timestamps
- 2025-10-08, 11:20 UTC, Feature, Added hashed API key management endpoints with usage telemetry, audit logging, and admin reporting
- 2025-10-11, 09:00 UTC, Fix, Restored authenticated legacy uploads route in FastAPI to eliminate shop image 404 errors
- 2025-10-10, 04:30 UTC, Fix, Mounted legacy uploads directory in FastAPI so shop product images load successfully
- 2025-10-08, 11:08 UTC, Fix, Allowed switch-company requests with incorrect JSON headers to fall back to form parsing so company switching succeeds
- 2025-10-10, 03:15 UTC, Fix, Prevented switch-company payload parsing from failing after CSRF middleware consumes the request body stream
- 2025-10-08, 10:55 UTC, Fix, Hardened active company session migration for legacy MySQL compatibility so company switching succeeds
# Change Log

- 2025-10-08, 10:58 UTC, Feature, Rebuilt forms repositories, assignment APIs, and OpnForm embedding for the Python portal
- 2025-09-17, 06:44 UTC, Feature, Setup change log file
- 2025-10-09, 20:50 UTC, Fix, Added missing FastAPI Form import to restore API startup
- 2025-10-09, 19:30 UTC, Fix, Restored company switching with session-backed active company tracking and sidebar selector
- 2025-09-17, 06:59 UTC, Feature, Consolidated Company Assets column toggles into a secure header view menu
- 2025-09-17, 07:02 UTC, Fix, Added server-rendered CSRF tokens to Apps management forms to prevent invalid token errors when saving changes
- 2025-09-17, 07:08 UTC, Fix, Repositioned asset search/view controls above the table with a default-collapsed column accordion
- 2025-09-17, 07:18 UTC, Fix, Added CSRF protection tokens to scheduled task forms to prevent invalid token errors when managing schedules
- 2025-09-17, 07:26 UTC, Feature, Split scheduled tasks into system and company tables for clearer administration and visibility
- 2025-09-17, 07:38 UTC, Feature, Added automated product DBP threshold alerts with super admin email and popup notifications
- 2025-09-17, 07:47 UTC, Fix, Normalised Syncro CPUAge import to populate asset Approx Age
- 2025-09-17, 07:54 UTC, Feature, Added OpnForm deployment guidance, nginx proxy config, and super admin builder link
- 2025-09-17, 09:16 UTC, Fix, Updated CSP frame policy to allow embedding OpnForm frames from form.hawkinsit.au
- 2025-09-17, 09:34 UTC, Feature, Added dynamic template variables for app URLs and documented usage in README
- 2025-09-17, 14:47 UTC, Fix, Proxied OpnForm embeds through an internal viewer to keep forms inside the portal while honouring template variables
- 2025-09-17, 15:30 UTC, Fix, Relaxed embedded form sandbox and CSP to support FIDO2 postMessage flows while keeping CSP restrictions
- 2025-09-17, 23:06 UTC, Feature, Enabled OpnForm iframe embed snippets in Forms admin with validation and sanitised storage
- 2025-09-18, 01:20 UTC, Fix, Served sanitised OpnForm embed snippets directly to avoid upstream fetch failures when loading forms
- 2025-09-18, 02:45 UTC, Fix, Always proxy OpnForm content and show an in-portal unavailable message when upstream embedding is blocked
- 2025-09-18, 04:10 UTC, Fix, Restored direct OpnForm URL management in Forms admin instead of requiring iframe embed snippets
- 2025-09-18, 07:03 UTC, Fix, Replaced proxied form viewer with direct iframe embedding and refreshed OpnForm documentation
- 2025-09-18, 07:21 UTC, Change, Switched the portal authentication route from /login to /logon and updated dependent redirects and templates
- 2025-09-18, 07:28 UTC, Change, Migrated forms routes from /forms to /myforms with documentation, nginx, and template updates plus legacy redirects
- 2025-09-18, 08:30 UTC, Feature, Rebuilt the MyPortal backend and UI in Python with FastAPI, async MySQL access, and responsive 3-panel theming
- 2025-09-18, 09:05 UTC, Fix, Replaced binary image assets with SVG icons to unblock PR creation and retain themeable layout
- 2025-10-07, 11:53 UTC, Fix, Added a virtual environment bootstrap script and README guidance to bypass externally managed pip install failures
- 2025-10-07, 12:00 UTC, Fix, Allowed extra environment variables in Python settings loader to restore API startup
- 2025-10-07, 12:10 UTC, Fix, Switched configuration fields to validation aliases so startup accepts secret and database env vars
- 2025-10-07, 12:19 UTC, Feature, Added secure upgrade automation script for pulling updates and restarting services

- 2025-10-07, 12:30 UTC, Fix, Guarded MySQL bootstrap connection shutdown to support aiomysql versions without wait_closed
- 2025-10-07, 12:36 UTC, Feature, Added FastAPI session management, CSRF middleware, login rate limiting, password reset, and TOTP flows with documented endpoints
- 2025-10-08, 00:58 UTC, Feature, Delivered responsive login and super-admin registration pages with session-aware redirects and client-side MFA support
- 2025-10-08, 02:12 UTC, Fix, Ensured login authenticator prompts expose and submit TOTP codes reliably while focusing invalid entries for quick retries
- 2025-10-08, 02:32 UTC, Fix, Forced login submissions to include sanitised TOTP values from the authenticator input when present to satisfy MFA checks
- 2025-10-09, 13:05 UTC, Feature, Documented legacy Node.js parity gaps and outlined restoration tasks in docs/node-parity-gap.md
- 2025-10-09, 13:30 UTC, Feature, Documented systemd service setup for running MyPortal as a managed Linux service
- 2025-10-09, 15:42 UTC, Fix, Switched password hashing to bcrypt_sha256 to support long credentials without login failures
- 2025-10-09, 16:18 UTC, Fix, Normalised login TOTP payload handling to accept legacy keys and enforce numeric codes server-side
- 2025-10-08, 04:05 UTC, Feature, Introduced role-based company memberships with audit logging and admin control panels
- 2025-10-08, 06:07 UTC, Feature, Rebuilt shop, forms, staff, and commerce admin dashboards with Jinja templates, responsive layout components, and supporting scripts
- 2025-10-08, 10:48 UTC, Fix, Updated upgrade automation to skip dependency reinstalls and service restarts when no upstream changes are pulled
- 2025-10-08, 06:33 UTC, Fix, Added global sidebar navigation for admin pages so new management views are accessible from the portal
- 2025-10-08, 06:41 UTC, Fix, Restored shop catalogue display for products whose names match their SKUs so existing items appear
- 2025-10-08, 06:49 UTC, Fix, Restored shop admin and catalogue views to load categories and products from the database with VIP pricing and company restrictions
- 2025-10-09, 18:00 UTC, Feature, Added port catalogue data models, secure document uploads, pricing workflow approvals, notification APIs, and refreshed Swagger documentation
- 2025-10-08, 07:28 UTC, Feature, Rebuilt staff data models, Syncro import client, scheduled sync runner, and management UI with API parity and permissions
- 2025-10-09, 21:15 UTC, Feature, Restored license management UI, Microsoft 365 sync services, OAuth callbacks, and admin credential workflows for parity with the legacy portal
- 2025-10-08, 10:40 UTC, Fix, Treated blank optional webhook URLs as unset so configuration validation no longer blocks startup
- 2025-10-08, 10:14 UTC, Fix, Allowed company switching endpoint to accept JSON and form payloads while validating memberships
- 2025-10-08, 10:19 UTC, Fix, Hardened company switching payload parsing to support form, JSON, and query parameters with updated documentation
- 2025-10-08, 10:32 UTC, Fix, Added resilient switch-company payload parsing fallback for raw form bodies and undocumented clients
- 2025-10-10, 12:00 UTC, Feature, Added persistent scheduler management APIs, webhook retry monitoring UI, and admin automation controls with database migrations
- 2025-10-10, 12:45 UTC, Fix, Corrected scheduler monitoring migration defaults and enforced UTC MySQL sessions to restore startup
