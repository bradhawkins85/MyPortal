{% extends "bcp/layout.html" %}

{% block bcp_content %}
<div class="bcp-page page-container">
  <!-- Success/Error Messages -->
  {% if request.query_params.get('success') %}
    <div class="alert alert-success">{{ request.query_params.get('success') }}</div>
  {% endif %}
  {% if request.query_params.get('error') %}
    <div class="alert alert-error">{{ request.query_params.get('error') }}</div>
  {% endif %}

  <!-- Page Header -->
  <div class="page-header">
    <div>
      <h1 class="page-title">Staff Wellbeing Support</h1>
      <p class="page-description">Support resources for staff during and after crises</p>
    </div>
    <div class="page-actions">
      <a href="/bcp" class="btn btn-secondary">Back to Overview</a>
      <a href="/bcp/recovery/checklist" class="btn btn-secondary">Recovery Checklist</a>
    </div>
  </div>

  <!-- Introduction -->
  <section class="card help-card">
    <div class="card-body">
      <h3 class="help-title">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"/>
        </svg>
        About Staff Wellbeing
      </h3>
      <p class="help-text">
        During and after a crisis, staff wellbeing is critical to both individual recovery and business continuity.
        This page provides access to support services, crisis counselling, and mental health resources available to all staff members.
        If you or a colleague are experiencing distress, please reach out to any of these services for confidential support.
      </p>
    </div>
  </section>

  <!-- Support Services -->
  <section class="card">
    <div class="card-header">
      <h2 class="card-title">Available Support Services</h2>
    </div>
    <div class="card-body">
      <div class="wellbeing-resources">
        {% for resource in wellbeing_resources %}
        <div class="wellbeing-resource-card">
          <div class="resource-header">
            <h3 class="resource-title">{{ resource.title }}</h3>
          </div>
          <div class="resource-body">
            <p class="resource-description">{{ resource.description }}</p>
            <div class="resource-contact">
              <div class="contact-item">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                  <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                </svg>
                <strong>Phone:</strong> <a href="tel:{{ resource.phone.replace(' ', '') }}">{{ resource.phone }}</a>
              </div>
              {% if resource.website %}
              <div class="contact-item">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
                <strong>Website:</strong> <a href="{{ resource.website }}" target="_blank" rel="noopener">{{ resource.website }}</a>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Additional Support -->
  <section class="card">
    <div class="card-header">
      <h2 class="card-title">Additional Resources</h2>
    </div>
    <div class="card-body">
      <div class="support-section">
        <h3 class="support-section-title">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
          </svg>
          Manager Support
        </h3>
        <p>
          Managers should be aware of staff reactions and provide appropriate support during and after crises.
          Key responsibilities include:
        </p>
        <ul>
          <li>Check in regularly with team members</li>
          <li>Be alert for signs of distress or difficulty coping</li>
          <li>Provide information about available support services</li>
          <li>Encourage staff to take care of their physical and mental health</li>
          <li>Facilitate debriefing sessions within 24-48 hours of an incident</li>
          <li>Maintain confidentiality and respect for privacy</li>
        </ul>
      </div>

      <div class="support-section">
        <h3 class="support-section-title">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
          </svg>
          Emergency Situations
        </h3>
        <p>
          <strong>If you or someone you know is in immediate danger or experiencing a mental health crisis, call emergency services immediately:</strong>
        </p>
        <div class="emergency-contact">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
          </svg>
          <strong>Emergency Services:</strong> <a href="tel:000" style="font-size: 1.2rem; font-weight: bold;">000</a>
        </div>
      </div>

      <div class="support-section">
        <h3 class="support-section-title">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
          </svg>
          Self-Care Tips
        </h3>
        <ul>
          <li>Take regular breaks and maintain healthy sleep patterns</li>
          <li>Stay connected with family, friends, and colleagues</li>
          <li>Engage in physical activity and maintain a healthy diet</li>
          <li>Limit exposure to distressing news or information</li>
          <li>Practice relaxation techniques such as deep breathing or meditation</li>
          <li>Seek professional help if feelings of distress persist</li>
        </ul>
      </div>
    </div>
  </section>

  {% if can_edit %}
  <!-- Admin Note -->
  <section class="card" style="border-left: 4px solid var(--color-info, #3b82f6);">
    <div class="card-body">
      <p style="margin: 0; color: var(--color-info, #3b82f6); font-weight: 500;">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="vertical-align: middle; margin-right: 0.5rem;">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
        </svg>
        <strong>Administrator Note:</strong> This page content can be customized to include organization-specific 
        support services, internal resources, and contact information. Future updates will add the ability 
        to edit these resources through the admin interface.
      </p>
    </div>
  </section>
  {% endif %}
</div>
{% endblock %}
